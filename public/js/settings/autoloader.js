(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1:function(e,t,n){e.exports=n("ThBO")},ThBO:function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.r(t);var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initCheckboxListener()}var t,n,r;return t=e,(n=[{key:"initCheckboxListener",value:function(){var e=$('meta[name="domain"]').attr("content");$("input[type='checkbox'].module-activation").on("click",function(t){var n=t.currentTarget,a=laroute.route("uccello.settings.module.activation",{domain:e});$.post(a,{_token:$("meta[name='csrf-token']").attr("content"),src_module:$(n).data("module"),active:!0===$(n).is(":checked")?"1":"0"}).fail(function(e){swal(uctrans("dialog.error.title"),uctrans("error.save","settings"),"error")})})}}])&&a(t.prototype,n),r&&a(t,r),e}();function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=n("LvDl"),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initMenus(),this.initListeners()}var t,n,a;return t=e,(n=[{key:"initMenus",value:function(){var e=this;this.itemsNumber=0,this.initMenuHtml("main-menu-structure","menu-main"),this.initMenuHtml("admin-menu-structure","menu-admin"),$(".menu-manager").nestable({maxDepth:3}),this.menuToJson(),$(".menu-manager").on("change",function(t){e.menuToJson(),e.save()})}},{key:"initMenuHtml",value:function(e,t){var n=JSON.parse($("meta[name='".concat(e,"']")).attr("content"));if("object"===i(n)){var a="",r=!0,o=!1,u=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;a+=this.buildItem(c)}}catch(e){o=!0,u=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw u}}$(".menu-manager.".concat(t," ol.dd-list:first")).html(a)}}},{key:"initListeners",value:function(){this.initSaveGroupButtonListener(),this.initSaveRouteLinkButtonListener(),this.initSaveLinkButtonListener(),this.initMenuSwitcherListener(),this.initEditButtonListener(),this.initRemoveButtonListener(),this.initActionsButtonsListener()}},{key:"initMenuSwitcherListener",value:function(){var e=this;$("input#menu-switcher").on("change",function(t){var n=$(t.currentTarget).is(":checked"),a=JSON.parse($("a.btn-reset").attr("data-config"));n?($(".menu-manager.menu-admin").show(),$(".menu-manager.menu-main").hide(),a.ajax.params={type:"admin"}):($(".menu-manager.menu-admin").hide(),$(".menu-manager.menu-main").show(),a.ajax.params={type:"main"}),$("a.btn-reset").attr("data-config",JSON.stringify(a)),e.menuToJson()})}},{key:"menuToJson",value:function(){this.menuStructure=JSON.stringify($(".menu-manager:visible").nestable("serialize"))}},{key:"save",value:function(){var e=$("meta[name='save-url']").attr("content");$.ajax({url:e,method:"post",data:{_token:$("meta[name='csrf-token']").attr("content"),structure:this.menuStructure,type:$(".menu-manager:visible").data("type")}}).then(function(e){$("span.saved").fadeIn().delay(1e3).fadeOut()}).fail(function(e){swal(uctrans("dialog.error.title","settings"),uctrans("error.save","settings"),"error")})}},{key:"initSaveGroupButtonListener",value:function(){var e=this;$("#save-group").on("click",function(t){var n=$("#groupModal input[name='label']"),a=$("#groupModal input[name='icon']"),r=n.val(),i=a.val();r?i?(e.saveGroup(r,i),$("#groupModal").modal("hide")):a.parent(".form-line").addClass(["focused","error"]):n.parent(".form-line").addClass(["focused","error"])})}},{key:"initSaveRouteLinkButtonListener",value:function(){var e=this;$("#save-route-link").on("click",function(t){var n=$("#routeLinkModal input[name='label']"),a=$("#routeLinkModal input[name='icon']"),r=$("#routeLinkModal input[name='module']"),i=$("#routeLinkModal input[name='route']"),o=n.val(),u=a.val(),s=r.val(),l=i.val();o?u?s?l?(e.saveRouteLink(o,u,s,l),$("#routeLinkModal").modal("hide")):i.parent(".form-line").addClass(["focused","error"]):r.parent(".form-line").addClass(["focused","error"]):a.parent(".form-line").addClass(["focused","error"]):n.parent(".form-line").addClass(["focused","error"])})}},{key:"initSaveLinkButtonListener",value:function(){var e=this;$("#save-link").on("click",function(t){var n=$("#linkModal input[name='label']"),a=$("#linkModal input[name='icon']"),r=$("#linkModal input[name='url']"),i=n.val(),o=a.val(),u=r.val();i?o?u?(e.saveLink(i,o,u),$("#linkModal").modal("hide")):r.parent(".form-line").addClass(["focused","error"]):a.parent(".form-line").addClass(["focused","error"]):n.parent(".form-line").addClass(["focused","error"])})}},{key:"initActionsButtonsListener",value:function(){var e=this;$(".btn-actions").on("click",function(){e.currentItem=null,e.currentItemJson=null,$(".modal input").val(""),$(".modal .form-line").removeClass("focused")})}},{key:"initEditButtonListener",value:function(){var e=this;$(".btn-edit").off("click"),$(".btn-edit").on("click",function(t){var n,a=$(t.currentTarget).parents("li:first"),r=$(a).data("id");switch(e.currentItem=a,e.retrieveCurrentItemJsonById(r,JSON.parse(e.menuStructure)),a.data("type")){case"group":n=$("#groupModal").modal(),$("input[name='label']",n).val(a.data("label")).parent().addClass("focused"),$("input[name='icon']",n).val(a.data("icon")).parent().addClass("focused");break;case"link":n=$("#linkModal").modal(),$("input[name='label']",n).val(a.data("label")).parent().addClass("focused"),$("input[name='icon']",n).val(a.data("icon")).parent().addClass("focused"),$("input[name='url']",n).val(a.data("url")).parent().addClass("focused");break;case"route":n=$("#routelinkModal").modal(),$("input[name='label']",n).val(a.data("label")).parent().addClass("focused"),$("input[name='icon']",n).val(a.data("icon")).parent().addClass("focused"),$("input[name='module']",n).val(a.data("module")).parent().addClass("focused"),$("input[name='route']",n).val(a.data("route")).parent().addClass("focused")}})}},{key:"initRemoveButtonListener",value:function(){var e=this;$(".btn-remove").off("click"),$(".btn-remove").on("click",function(t){var n=$(t.currentTarget).parents("li:first").data("id");e.retrieveCurrentItemJsonById(n,JSON.parse(e.menuStructure)),e.currentItemJson&&e.currentItemJson.children?swal(uctrans("menu.error.not_empty.title","settings"),uctrans("menu.error.not_empty.description","settings"),"error"):($(".menu-manager:visible").nestable("remove",n),e.menuToJson(),e.save())})}},{key:"saveGroup",value:function(e,t){if(this.currentItem){if(null!==this.currentItemJson){this.currentItemJson.label=e,this.currentItemJson.icon=t,$(this.currentItem).attr("data-label",e).attr("data-icon",t),$(".icon-label:first",this.currentItem).text(e),$(".material-icons:first",this.currentItem).text(t),$(".menu-manager:visible").nestable("replace",this.currentItemJson);var n=$(this.currentItem).data("id");$("[data-id='".concat(n,"']")).replaceWith(this.currentItem)}}else{var a=this.buildItem({type:"group",label:e,icon:t,color:"green"});$(".menu-manager:visible .dd-list:first").append(a)}$(".menu-manager:visible").trigger("change"),this.initEditButtonListener(),this.initRemoveButtonListener()}},{key:"saveRouteLink",value:function(e,t,n,a){if(this.currentItem){if(null!==this.currentItemJson){this.currentItemJson.label=e,this.currentItemJson.icon=t,this.currentItemJson.module=n,this.currentItemJson.route=a,$(this.currentItem).attr("data-label",e).attr("data-icon",t).attr("data-module",n).attr("data-route",a),$(".icon-label:first",this.currentItem).text(e),$(".material-icons:first",this.currentItem).text(t),$(".menu-manager:visible").nestable("replace",this.currentItemJson);var r=$(this.currentItem).data("id");$("[data-id='".concat(r,"']")).replaceWith(this.currentItem)}}else{var i=this.buildItem({type:"route",module:n,label:e,icon:t,color:"red",route:a});$(".menu-manager:visible .dd-list:first").append(i)}$(".menu-manager:visible").trigger("change"),this.initEditButtonListener(),this.initRemoveButtonListener()}},{key:"saveLink",value:function(e,t,n){if(this.currentItem){if(null!==this.currentItemJson){this.currentItemJson.label=e,this.currentItemJson.icon=t,this.currentItemJson.url=n,$(this.currentItem).attr("data-label",e).attr("data-icon",t).attr("data-url",n),$(".icon-label:first",this.currentItem).text(e),$(".material-icons:first",this.currentItem).text(t),$(".menu-manager:visible").nestable("replace",this.currentItemJson);var a=$(this.currentItem).data("id");$("[data-id='".concat(a,"']")).replaceWith(this.currentItem)}}else{var r=this.buildItem({type:"link",label:e,icon:t,color:"blue",url:n});$(".menu-manager:visible .dd-list:first").append(r)}$(".menu-manager:visible").trigger("change"),this.initEditButtonListener(),this.initRemoveButtonListener()}},{key:"retrieveCurrentItemJsonById",value:function(e,t,n){if("object"==i(t)){var a=!0,r=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var l=u.value;if(l.id==e){this.currentItemJson=l,this.currentItemParentJson=n;break}l.children&&this.retrieveCurrentItemJsonById(e,l.children,l)}}catch(e){r=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}}}},{key:"buildItem",value:function(e){var t=this;this.itemsNumber++;var n="";"group"!==e.type&&(n="dd-nochildren");var a="";e.module&&(a='data-module="'.concat(e.module,'"'));var r="";e.url&&(r='data-url="'.concat(e.url,'"'));var i="";e.route&&(i='data-route="'.concat(e.route,'"'));var o="",s=e.label;e.translation&&(o='data-translation="'.concat(e.translation,'"'),s=e.translation);var l="";"module"!==e.type&&(l='<div class="dd3-actions">\n                        <i class="material-icons btn-edit">edit</i>\n                        <i class="material-icons btn-remove">delete</i>\n                    </div>');var c='<li class="dd-item dd3-item '.concat(n,'" data-id="').concat(this.itemsNumber,'" ').concat(a," ").concat(i," ").concat(r,' data-type="').concat(e.type,'" data-label="').concat(e.label,'" ').concat(o,' data-icon="').concat(e.icon,'" data-nochildren="').concat(!!e.noChildren,'" data-color="').concat(e.color,'">\n                <div class="dd-handle dd3-content">\n                    <i class="material-icons">').concat(e.icon,'</i>\n                    <span class="icon-label">').concat(s,'</span>\n                    <span class="pull-right col-').concat(e.color,'">').concat(u.capitalize(e.type),"</span>\n                </div>\n                ").concat(l);return e.children&&(c+='<ol class="dd-list">',$.each(e.children,function(e,n){c+=t.buildItem(n)}),c+="</ol>"),c+="</li>"}}])&&o(t.prototype,n),a&&o(t,a),e}();function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lazyLoad()}var t,n,a;return t=e,(n=[{key:"lazyLoad",value:function(){switch($('meta[name="page"]').attr("content")){case"module-manager":new r;break;case"menu-manager":new s}}}])&&l(t.prototype,n),a&&l(t,a),e}())},YuTi:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},yLpj:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n}},[[1,0,1]]]);